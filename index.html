<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test GTM</title>
    <script>(function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-WM4RQVWK');</script>
    <!-- End Google Tag Manager -->
</head>
<body>
<h2>Page index</h2>
<ul>
    <li><a href="index.html">Index page</a></li>
    <li><a href="second_page.html">Second page</a></li>
</ul>
<hr>
<h1>Тестування підключення контейнеру GTM з двома тегами GA4 від різних власників (облікових записів)</h1>
<hr>
<h3>Дві тестові кнопки для тестування івентів GA4</h3>
<button data-test-button-one="true" id="test-button-1" onclick="firstButtonClick()">Test button 1</button>
<button data-test-button-two="true" id="test-button-2" onclick="secondButtonClick()">Test button 2</button>
<button data-test-button-three="true" id="test-button-3" onclick="secondTTFB()">Test button 3</button>

<script>
    function getRandomTime() {
        const randomValue = Math.random(); // Генеруємо випадкове значення від 0 до 1

        if (randomValue <= 0.7) {
            // Якщо випадкове число від 0 до 0.7, повертаємо число від 2 до 3 секунд
            return 2 + Math.random() * (3 - 2);
        } else {
            // Якщо випадкове число більше 0.7, повертаємо число від 0.1 до 5 секунд
            return 0.1 + Math.random() * (5 - 0.1);
        }
    }

    function dataLayerPush(data) {
        window.dataLayer = window.dataLayer  || [];
        window.dataLayer.push({ecommerce: null});
        dataLayer.push(data);
    }

    function firstButtonClick() {
        dataLayerPush({
            event: "first_button_click",
            first_test_label: "first_test_value",
            item_id: new Date().getMilliseconds(),
        });
    }

    function secondButtonClick() {
        dataLayerPush({
            event: "second_button_click",
            second_test_label: "second_test_value",
            item_id: new Date().getMilliseconds(),
        });
    }

    function secondTTFB() {
        dataLayerPush({
            event: "target_page_ttfb",
            value: getRandomTime(),
        });
    }
</script>


<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WM4RQVWK"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->
</body>
</html>